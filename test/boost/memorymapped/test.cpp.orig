#include "memory_map.hpp"

int main(int argc, char *argv[])
{

    enum {buf_size = 4096, pages_used = 10};
    //int buf_size=atoi(argv[2]);
    //int pages_used=10;

    char buffer[buf_size+1];

    MMAP_AG::Len l;

    MMAP_AG::memory_map m_file(argv[1], pages_used);

    while (m_file.residual() > 0) {
        l = m_file.read_bytes(buffer, buf_size);
        buffer[l] = '\0';
        std::cout << buffer;
    }
    
    m_file.close();
    
    MMAP_AG::memory_map m_file2(argv[1], pages_used);
    float buffer2[3];
    l = m_file2.read_bytes(buffer2, 12);
    if(from_string<float>(f, std::string("123.456"), std::dec))
      {
        std::cout << f << std::endl;
      }
      else
      {
        std::cout << "from_string failed" << std::endl;
      }

}

